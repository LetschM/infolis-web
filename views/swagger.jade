extends ./layout.jade
block title
	title Infolis API Explorer
block css
	link(href='#{site_api}/vendor/swagger/css/reset.css', media='screen', rel='stylesheet', type='text/css')
	link(href='#{site_api}/vendor/swagger/css/typography.css', media='screen', rel='stylesheet', type='text/css')
	link(href='#{site_api}/vendor/swagger/css/screen.css', media='screen', rel='stylesheet', type='text/css')
	link(href='#{site_api}/vendor/swagger/css/print.css', media='print', rel='stylesheet', type='text/css')
block libs
	script(src='#{site_api}/vendor/swagger/lib/jquery.slideto.min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/jquery.wiggle.min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/jquery.ba-bbq.min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/handlebars-2.0.0.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/underscore-min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/backbone-min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/swagger-ui.min.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/highlight.7.3.pack.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/marked.js', type='text/javascript')
	script(src='#{site_api}/vendor/swagger/lib/swagger-oauth.js', type='text/javascript')
block content
	script
		:coffee-script
			$ ->
				window.swaggerUi = new SwaggerUi(
					url: '/infolink/swagger.json'
					dom_id: 'swagger-ui-container'
					supportedSubmitMethods: [
						'get'
						'post'
						'put'
						'delete'
						'patch'
					]
					onComplete: (swaggerApi, swaggerUi) ->
						$('.container .container').removeClass 'container'
						$('#api_info').hide()
						$('.options').hide()
						# $('.endpoint').has('.delete').hide()
						$('pre code').each (i, e) ->
							hljs.highlightBlock e
					onFailure: (data) -> console.log 'Unable to Load SwaggerUI'
					docExpansion: 'none'
					apisSorter: 'alpha'
					showRequestHeaders: true
				)
				window.swaggerUi.load()
	.swagger-section
		#swagger-ui-container.swagger-ui-wrap
